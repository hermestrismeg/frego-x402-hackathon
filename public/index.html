<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Frego x402 - AI Shipping Agent</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <!-- Video background matching trust center -->
    <video autoplay loop muted playsinline class="video-background" poster="/Bc.png">
        <source src="/background.mp4" type="video/mp4" />
    </video>
    <div class="video-background-fallback"></div>

    <!-- SVG Filters for liquid glass effect -->
    <svg style="display: none;">
        <filter id="glass-distortion" x="0%" y="0%" width="100%" height="100%" filterUnits="objectBoundingBox">
            <feTurbulence type="fractalNoise" baseFrequency="0.01 0.01" numOctaves="5" seed="30" result="turbulence"/>
            <feDisplacementMap in="SourceGraphic" in2="turbulence" scale="40" xChannelSelector="R" yChannelSelector="G"/>
        </filter>
    </svg>

    <div class="container liquid-glass shine">
        <header>
            <h1>üì¶ Frego x402 AI Shipping Agent</h1>
            <p class="subtitle">AI-powered shipping labels with crypto payments</p>
        </header>

        <div class="wallet-status" id="walletStatus">
            <span class="status-dot"></span>
            <span id="walletText">Connect Wallet to Continue</span>
        </div>

        <button id="connectWallet" class="btn btn-primary">Connect Wallet</button>

        <div id="mainForm" style="display: none;">
            <form id="shippingForm">
                <section class="form-section">
                    <h2>üìù Item Description</h2>
                    <div class="form-group">
                        <label for="itemDescription">What are you shipping?</label>
                        <textarea
                            id="itemDescription"
                            rows="3"
                            placeholder="e.g., A laptop, about 3 pounds, fairly valuable"
                            required
                        ></textarea>
                        <small>Our AI will analyze this to determine weight, dimensions, and shipping needs</small>
                    </div>
                </section>

                <section class="form-section">
                    <h2>üì§ From Address</h2>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="fromName">Name</label>
                            <input type="text" id="fromName" value="John Smith" required>
                        </div>
                        <div class="form-group">
                            <label for="fromStreet">Street Address</label>
                            <input type="text" id="fromStreet" value="1355 Market St" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="fromCity">City</label>
                            <input type="text" id="fromCity" value="San Francisco" required>
                        </div>
                        <div class="form-group">
                            <label for="fromState">State</label>
                            <input type="text" id="fromState" value="CA" maxlength="2" required>
                        </div>
                        <div class="form-group">
                            <label for="fromZip">ZIP</label>
                            <input type="text" id="fromZip" value="94103" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="fromEmail">Email</label>
                            <input type="email" id="fromEmail" value="sender@example.com" required>
                        </div>
                        <div class="form-group">
                            <label for="fromPhone">Phone</label>
                            <input type="tel" id="fromPhone" value="+1 555-123-4567" required>
                        </div>
                    </div>
                </section>

                <section class="form-section">
                    <h2>üì• To Address</h2>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="toName">Name</label>
                            <input type="text" id="toName" value="Jane Doe" required>
                        </div>
                        <div class="form-group">
                            <label for="toStreet">Street Address</label>
                            <input type="text" id="toStreet" value="350 5th Ave" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="toCity">City</label>
                            <input type="text" id="toCity" value="New York" required>
                        </div>
                        <div class="form-group">
                            <label for="toState">State</label>
                            <input type="text" id="toState" value="NY" maxlength="2" required>
                        </div>
                        <div class="form-group">
                            <label for="toZip">ZIP</label>
                            <input type="text" id="toZip" value="10118" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="toEmail">Email</label>
                            <input type="email" id="toEmail" value="recipient@example.com" required>
                        </div>
                        <div class="form-group">
                            <label for="toPhone">Phone</label>
                            <input type="tel" id="toPhone" value="+1 555-987-6543" required>
                        </div>
                    </div>
                </section>

                <button type="submit" class="btn btn-primary btn-large">
                    Get Shipping Quotes (Pay $0.001 USDC)
                </button>
                <small style="text-align: center; display: block; margin-top: 10px; color: #888;">
                    MetaMask will prompt you to approve the USDC payment
                </small>
            </form>
        </div>

        <div id="loading" class="loading" style="display: none;">
            <div class="spinner"></div>
            <p id="loadingText">Processing...</p>
        </div>

        <div id="results" class="results" style="display: none;">
            <h2>‚úÖ Shipping Quotes Retrieved!</h2>

            <div id="aiParsed" class="card"></div>

            <div id="quotes" class="quotes-container"></div>

            <button class="btn btn-secondary" onclick="resetForm()">Get Another Quote</button>
        </div>

        <div id="error" class="error" style="display: none;">
            <h3>‚ùå Error</h3>
            <p id="errorMessage"></p>
            <button class="btn btn-secondary" onclick="hideError()">Try Again</button>
        </div>
    </div>

    <!-- Glass filters loaded at end like trust center -->
    <svg style="display: none;">
        <filter id="glass-distortion-2" x="0%" y="0%" width="100%" height="100%" filterUnits="objectBoundingBox">
            <feTurbulence type="fractalNoise" baseFrequency="0.01 0.01" numOctaves="1" seed="20" result="turbulence"/>
            <feDisplacementMap in="SourceGraphic" in2="turbulence" scale="180" xChannelSelector="G" yChannelSelector="B"/>
        </filter>
    </svg>

    <script src="/app-standalone.js"></script>
</body>
</html>
